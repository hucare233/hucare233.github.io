---
sort: 4
---

# 学长总结
`关于技术类总结由于年代问题挺多技术现在已经不再使用，加之部分之前已经提到，这里截取部分学长的心得体会`

## 乔越学长

---

1. 前期的时候，一定要多跟机械组尤其设计机构的同学多交流，因为前期他们对这种电机不太熟悉，可以去帮忙一起计算一下，或者一些不太合适的想法要及时否定掉，开始如果提不出太好的想法，就一定要多帮忙评估一下别人想法的可能性，提出建议跟改进方法，总之多交流是比较重要的。
2. 除了主控吧，基本上每个人都会有忙一些跟不忙的时候，在不忙的时候，一定要利用好时间，我的建议是一下有空闲，可以了解一些硬件知识，这个不论是自己写代码还是后期帮助硬件组开发测试板子都有很大的帮助（不是学怎么焊板子）。
最重要的问题，在队里心态一定要好，碰到问题不要着急，自己努力去找解决办法也可以找别人求助；坚持不下去的时候就多跟学长老师交流一下，他们很多事情都可以帮到的；自己在忙的时候看到别人休息一定不要抱怨，每个人都有自己负责的部分，大家都是共同努力的。总之是会碰到很多情况，保持轻松愉快积极向上的心态，可以帮助你收货到更多。

---

## 姜宇扬学长

---

1. U10如果没有霍尔的话，电机编码器线数和电机极对数是有一个数学关系的，这个电机需要2000线及以上的编码器，因为码盘式的编码器线数高了就比较大，所以我们最终选了今年用的这种4096线的磁电式编码器，就可以成功通过换向了，但是后来第一次使能的成功率很低，通过不断试验和查看elmo手册，发现和ca[16]、ca[25]两个参数有关，ef[1]也要配套，具体可以查看elmo手册，并且调好了以后每次使能需要放在受力一样或者差不多的位置

2. 小型传感器的调试，这部分主要由光电开关、限位开关、电磁吸盘、电磁阀、涵道风扇等，其中除了涵道风扇这些都是依靠io电平信号控制的，即0和1，涵道风扇是输出pwm波，但是每个涵道风扇有其特定的启动准备操作，比如先将pwm波输出控制范围内的最大，再输出最低，才完成涵道风扇初始化，（PS:涵道风扇已经被官方封印了）

---

## 黄开基学长

---

1. 关于我们所用到的蓝牙的问题，我们所用的蓝牙分为三种：第一批软件版本较低（比V3.1低，应该是V2.0）的蓝牙、第二批V3.1的蓝牙和射频蓝牙。其中，射频蓝牙的性能最好，基本没有丢包现象；V2.0的蓝牙虽然有丢包，但是使用起来比较方便；V3.1的蓝牙有特殊限制，初始配对完成后不能立刻传输数据，需要等很短一段时间才能开始传输数据，限制较大。（建议都去学学蓝牙的配置，通过串口实现，并不是很复杂）
2. 硬件和软件是相辅相成的，硬件决定了软件所能达到的高度和稳定性，同时优秀的软件算法可以弥补部分硬件稳定性的不足，所以尽量加入一些可容错算法。
3. 有些时候需要考虑程序效率，比如printf会占用大量的运行时间，一次运行大概是几十毫秒到几百毫秒的水平，有可能直接导致程序崩溃，这方面一定要有所顾忌。之前出现过定时器更新中断中运行效率过低导致程序运行概率性失常（中断导致main函数中的while(1)无法进入）。
4. 关于can通信，曾经出现过大电流干扰CAN通信的问题。特别是CAN线没有屏蔽层的情况
5. 在放电电流过大的瞬间有可能造成“under voltage”的故障，同理在电机急停的一瞬间也有可能造成“over voltage”的故障，这两个是电压过小和过大的故障保护，可以通过xp[1]指令调整阈值（详参composer的Help），但是有时候会出现莫名其妙的故障保护。

---

## 杨震学长

---

1. C反馈的是对上次收到的命令的处理状态，而MF反馈电机被shutdown的原因。当导致电机故障的原因已经消失（欠电压或过电压之类）后再次使能电机，MF就会被重置
2. 回声（Software Manual 3.2）：在通过RS-232通讯时，elmo在收到指令后会将指令逐字母发回。此功能可以通过指令EO=0关闭，用elmo composer时此功能必须打开
3. 电机旋转一圈反馈的脉冲数（1000线编码器反馈4000脉冲）除以电机极对数应大于等于36。
4. PVT运动要协调两点之间的距离和速度，否则其中的速度差值可能会超速

---

## 王锟学长

---

1. 我本意为让ELMO电机在main函数激活CAN总线后转到TIM中断里面去执行模式设定等初始化函数，完成后返回main里面使能电机，但现在我的main函数是在整个临界区内运行的，中断关闭定时器完全没有用，所以仅仅给init=true的标志位是完全没有意义的。需要把所执行的函数内部直接在main函数里面运行。  
这也解释了我之前为什么一直想清除DJ电机的初始角度误差却未果，因为我也是通过给isSetZero标志位去间接控制的，根本无法起作用。
2. 程序一定要严谨，逻辑上一定要没有问题。
3. 关于堵转判断，实际操作中发现，很多时候大疆电机都处于大电流状态，很容易判断出来堵转，感觉并不实用，因为一般这时候程序里面就写着堵转不释放。只能告诉我这时候是大电流了。  但是关于电流，DJ电机又非其他电机，他这个电流本来就在允许范围内，所以堵转并不会烧电机。
4. 人生在世，人，应当尝试一次寄存器。

---

### 菜逼废话（`bushi`）

+ 菜逼不配拥有总结，但是这里还想提一句，以上学长的总结，只是摘取了一些我认为相对最重要的部分，学长的总结真的很值得仔细去阅读，并且反复看，即使在搬运的时候，我也学到了很多之前没注意的的东西，实际上我踩得不少坑回过头才发现文档里学长都有总结，并给出了相应的解决方法，后知后觉走了很多弯路，大家在刚进入机构组学习的时候，真心建议多看看学长的总结，调试机构是实践大于理论的工作，学长总结下来的经验，可以让我们事半功倍。